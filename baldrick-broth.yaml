---
model:
  project:
    title: Reserve of templates used for scaffolding
  pest-filenames:
    - typescript

workflows:
  test:
    title: Test the library
    description: Test the library for defects
    tasks:
      pest:
        title: Run acceptance tests for the CLI
        description: Run acceptance tests declaratively using YAML files
        motivation: Check that the CLI application behaves as intended
        links:
          - title: Testing with baldrick-pest
            url: https://github.com/flarebyte/baldrick-pest
        main:
          each:
            - name: pest-filename
              values: build.model.pest-filenames
          commands:
            - title: Run regression on file
              name: Run regression on {{pest-filename}}.pest.yaml
              run: npx baldrick-pest@latest test --spec-file pest-spec/{{pest-filename}}.pest.yaml
  generate:
    title: Generate documents
    description: Generate documents
    tasks:
      schema:
        title: Generate json schema
        description: Generate json schema from Zod model
        main:
          commands:
            - title: Generate entity json schema
              run: npx zx --install reserve-schema/entity-schema.mjs
            - title: Generate access control json schema
              run: npx zx --install reserve-schema/access-control-schema.mjs
            - title: Generate technology json schema
              run: npx zx --install reserve-schema/technology-schema.mjs
            - title: Generate typescript broth json schema
              run: npx zx --install reserve-schema/typescript-broth-schema.mjs
  
