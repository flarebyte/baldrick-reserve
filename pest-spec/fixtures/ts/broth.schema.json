{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/baldrick-broth-schema",
    "definitions": {
      "baldrick-broth-schema": {
        "type": "object",
        "properties": {
          "engine": {
            "type": "object",
            "properties": {
              "telemetry": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 40
                  },
                  "verbosity": {
                    "type": "string",
                    "maxLength": 100
                  },
                  "filepath": {
                    "type": "string",
                    "maxLength": 300,
                    "description": "A relative path to a file"
                  }
                },
                "required": [
                  "verbosity",
                  "filepath"
                ],
                "additionalProperties": false,
                "description": "Preferences for telemetry"
              }
            },
            "required": [
              "telemetry"
            ],
            "additionalProperties": false,
            "description": "Settings for the baldrick-broth engine"
          },
          "model": {
            "anyOf": [
              {
                "anyOf": [
                  {
                    "type": "string",
                    "minLength": 1
                  },
                  {
                    "type": "number"
                  },
                  {
                    "type": "boolean"
                  }
                ]
              },
              {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/baldrick-broth-schema/properties/model"
                }
              },
              {
                "type": "object",
                "additionalProperties": {
                  "$ref": "#/definitions/baldrick-broth-schema/properties/model"
                }
              }
            ],
            "description": "Any JSON document without null values"
          },
          "workflows": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 60,
                  "description": "A short title that summarizes this section of script"
                },
                "description": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 300,
                  "description": "The main purpose of this section of script"
                },
                "tasks": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "maxLength": 1,
                        "default": ""
                      },
                      "title": {
                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                      },
                      "description": {
                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/description"
                      },
                      "motivation": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 300,
                        "description": "The main reason why this section of script is needed"
                      },
                      "parameters": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "description": {
                              "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/description"
                            },
                            "flags": {
                              "type": "string",
                              "minLength": 1,
                              "maxLength": 80
                            },
                            "default": {
                              "type": "string",
                              "minLength": 1,
                              "maxLength": 300
                            }
                          },
                          "required": [
                            "description",
                            "flags"
                          ],
                          "additionalProperties": false,
                          "description": "Settings for a task parameter"
                        },
                        "maxItems": 20
                      },
                      "steps": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "a": {
                              "type": "string",
                              "const": "batch"
                            },
                            "name": {
                              "type": "string",
                              "minLength": 1,
                              "maxLength": 60,
                              "pattern": "[a-z][\\d_a-z]+",
                              "description": "A short name that could be used a key or variable"
                            },
                            "title": {
                              "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                            },
                            "description": {
                              "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/description"
                            },
                            "motivation": {
                              "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/motivation"
                            },
                            "links": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "title": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                  },
                                  "url": {
                                    "type": "string",
                                    "format": "uri",
                                    "maxLength": 300,
                                    "description": "A https link to a webpage"
                                  }
                                },
                                "required": [
                                  "title",
                                  "url"
                                ],
                                "additionalProperties": false,
                                "description": "Info about a link"
                              },
                              "description": "A list of useful links"
                            },
                            "before": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "get-property"
                                      },
                                      "name": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 60,
                                        "pattern": "[a-z][\\d_a-z]+",
                                        "description": "A short name that could be used a key or variable for the step"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "value": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 300,
                                        "pattern": "(([\\d._a-z]+)|(\\[\\d+]))+",
                                        "description": "A dot prop path"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Get a property using a dot prop path"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "string-array"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "value": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                      },
                                      "onSuccess": {
                                        "type": "string",
                                        "enum": [
                                          "sort",
                                          "unique",
                                          "filled",
                                          "reverse"
                                        ]
                                      },
                                      "filters": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "if": {
                                              "type": "string",
                                              "enum": [
                                                "starts-with",
                                                "ends-with",
                                                "contains",
                                                "equals",
                                                "not starts-with",
                                                "not ends-with",
                                                "not contains",
                                                "not equals"
                                              ],
                                              "description": "Filter criteria"
                                            },
                                            "anyOf": {
                                              "type": "array",
                                              "items": {
                                                "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                              },
                                              "minItems": 1,
                                              "maxItems": 50,
                                              "description": "A list of references to match against"
                                            }
                                          },
                                          "required": [
                                            "if",
                                            "anyOf"
                                          ],
                                          "additionalProperties": false,
                                          "description": "Filter an array of strings"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20,
                                        "description": "A list of filters on strings"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value",
                                      "onSuccess"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Process on a list of strings"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "concat-array"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "values": {
                                        "type": "array",
                                        "items": {
                                          "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "values"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Concatenate several arrays together"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "split-string"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "separator": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80,
                                        "default": " ",
                                        "description": "A separator to split the string"
                                      },
                                      "value": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Split a string into multiple strings"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "some-truthy"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "values": {
                                        "type": "array",
                                        "items": {
                                          "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "values"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Return true if at least one of values is truthy"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "some-falsy"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "values": {
                                        "type": "array",
                                        "items": {
                                          "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "values"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Return true if at least one of values is falsy"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "every-truthy"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "values": {
                                        "type": "array",
                                        "items": {
                                          "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "values"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Return true if all the values are truthy"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "every-falsy"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "values": {
                                        "type": "array",
                                        "items": {
                                          "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                        },
                                        "minItems": 1,
                                        "maxItems": 20
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "values"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Return true if all the values are falsy"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "not"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "value": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Return the opposite boolean value"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "range"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "start": {
                                        "type": "integer",
                                        "default": 0,
                                        "description": "The number to start the range with"
                                      },
                                      "end": {
                                        "type": "integer",
                                        "description": "The number at the end of the range"
                                      },
                                      "step": {
                                        "type": "integer",
                                        "default": 1,
                                        "description": "A step to increment the range, usually 1"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "end"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Generate a range of numbers"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "invert-object"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "value": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Invert keys and values into a new object"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "a": {
                                        "type": "string",
                                        "const": "mask-object"
                                      },
                                      "name": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/name"
                                      },
                                      "title": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                      },
                                      "description": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/description"
                                      },
                                      "motivation": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/motivation"
                                      },
                                      "links": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                      },
                                      "value": {
                                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value"
                                      },
                                      "mask": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 100,
                                        "description": "JSON mask to select parts of the json object"
                                      }
                                    },
                                    "required": [
                                      "a",
                                      "name",
                                      "title",
                                      "value",
                                      "mask"
                                    ],
                                    "additionalProperties": false,
                                    "description": "Uses JSON mask to select parts of the json object"
                                  }
                                ],
                                "description": "An operation on the context"
                              },
                              "minItems": 1,
                              "maxItems": 20,
                              "description": "A list of operations to run before end"
                            },
                            "if": {
                              "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value",
                              "description": "A condition that must be satisfied to enable the batch"
                            },
                            "each": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 60,
                                    "pattern": "[a-z][\\d_a-z]+",
                                    "description": "A short name that can used as variable"
                                  },
                                  "values": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 300
                                  }
                                },
                                "required": [
                                  "name",
                                  "values"
                                ],
                                "additionalProperties": false,
                                "description": "Configuration of every loop"
                              },
                              "minItems": 1,
                              "maxItems": 3,
                              "description": "The same batch will be run multiple times for each loop"
                            },
                            "onFinish": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "enum": [
                                  "exit",
                                  "silent"
                                ]
                              },
                              "minItems": 1,
                              "description": "Expected behavior when the batch finishes"
                            },
                            "commands": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/name"
                                  },
                                  "title": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/title"
                                  },
                                  "description": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/description"
                                  },
                                  "motivation": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/motivation"
                                  },
                                  "links": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/links"
                                  },
                                  "onFailure": {
                                    "type": "array",
                                    "items": {
                                      "type": "string",
                                      "enum": [
                                        "exit",
                                        "silent",
                                        "trim",
                                        "json",
                                        "yaml",
                                        "csv",
                                        "save",
                                        "debug"
                                      ]
                                    },
                                    "minItems": 1,
                                    "default": [
                                      "exit"
                                    ],
                                    "description": "List of flags to describe the default behavior in case of failure"
                                  },
                                  "onSuccess": {
                                    "type": "array",
                                    "items": {
                                      "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/commands/items/properties/onFailure/items"
                                    },
                                    "minItems": 1,
                                    "default": [
                                      "trim"
                                    ],
                                    "description": "List of flags to describe the default behavior in case of success"
                                  },
                                  "if": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value",
                                    "description": "reference to JSON path that must be satisfied for the step to run"
                                  },
                                  "stdin": {
                                    "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps/items/properties/before/items/anyOf/0/properties/value",
                                    "description": "Provide stdin with a value read from a dot prop path"
                                  },
                                  "run": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 300,
                                    "description": "A line of shell script"
                                  }
                                },
                                "required": [
                                  "title",
                                  "run"
                                ],
                                "additionalProperties": false,
                                "description": "Configuration for the batch shell script"
                              },
                              "minItems": 1,
                              "maxItems": 50,
                              "description": "A list of batch shell scripts to run"
                            }
                          },
                          "required": [
                            "a",
                            "title",
                            "commands"
                          ],
                          "additionalProperties": false,
                          "description": "A batch of shell commands to run"
                        },
                        "minItems": 1
                      },
                      "finally": {
                        "$ref": "#/definitions/baldrick-broth-schema/properties/workflows/additionalProperties/properties/tasks/additionalProperties/properties/steps"
                      }
                    },
                    "required": [
                      "title",
                      "steps"
                    ],
                    "additionalProperties": false,
                    "description": "Settings for a task"
                  },
                  "propertyNames": {
                    "minLength": 1,
                    "maxLength": 60,
                    "pattern": "[a-z][\\d_a-z]+"
                  }
                }
              },
              "required": [
                "title",
                "tasks"
              ],
              "additionalProperties": false,
              "description": "A domain for a list of tasks"
            },
            "propertyNames": {
              "minLength": 1,
              "maxLength": 60,
              "pattern": "[a-z][\\d_a-z]+"
            }
          }
        },
        "required": [
          "model",
          "workflows"
        ],
        "additionalProperties": false,
        "description": "Settings for a baldrick-broth file"
      }
    }
  }